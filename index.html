<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikacja Testowa</title>
    <link rel="stylesheet" href="styles.css">
    <!-- KaTeX dla wyra≈ºe≈Ñ matematycznych -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
</head>
<body>
    <!-- Marked.js dla Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- KaTeX -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    
    <div class="app-container">
        <!-- G√≥rny pasek nawigacji -->
        <nav class="navbar">
            <div class="nav-brand">üìù TestApp</div>
            <ul class="nav-tabs">
                <li class="nav-tab active" data-tab="add-test">
                    <span class="tab-icon">‚ûï</span>
                    Dodaj test
                </li>
                <li class="nav-tab" data-tab="tests">
                    <span class="tab-icon">üìã</span>
                    Testy
                </li>
                <li class="nav-tab" data-tab="results">
                    <span class="tab-icon">üìä</span>
                    Wyniki
                </li>
            </ul>
        </nav>

        <!-- G≈Ç√≥wna zawarto≈õƒá -->
        <main class="main-content">
            <!-- Sekcja: Dodaj test -->
            <section id="add-test" class="tab-content active">
                <div class="section-header">
                    <h1>Dodaj nowy test</h1>
                    <p>Utw√≥rz test rƒôcznie lub zaimportuj z pliku CSV</p>
                    <div class="storage-info">
                        üíæ Twoje testy i wyniki sƒÖ automatycznie zapisywane w przeglƒÖdarce i nie zniknƒÖ po zamkniƒôciu aplikacji.
                    </div>
                </div>

                <div class="card">
                    <h2>Informacje o te≈õcie</h2>
                    <div class="form-group">
                        <label for="test-name">Nazwa testu</label>
                        <input type="text" id="test-name" placeholder="np. Test z matematyki">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="test-type">Typ testu</label>
                            <select id="test-type">
                                <option value="single">Jednokrotny wyb√≥r</option>
                                <option value="multiple">Wielokrotny wyb√≥r</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="answers-count">Liczba odpowiedzi</label>
                            <input type="number" id="answers-count" min="2" max="10" value="4" placeholder="2-10">
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>Import z CSV</h2>
                    <div class="csv-info">
                        <h3>Wymagany format CSV:</h3>
                        <code class="csv-format">
                            pytanie;odpowiedz1;odpowiedz2;...;odpowiedzN;poprawna;notatka_pytania;notatka1;notatka2;...<br>
                            Ile to 2+2?;2;3;4;5;3;Proste dodawanie;Zbyt ma≈Ço;Blisko!;Poprawna!;Za du≈ºo<br>
                            Stolica Polski?;Krak√≥w;Warszawa;Gda≈Ñsk;Pozna≈Ñ;2;;Dawna stolica;Tak!;Port;Miasto
                        </code>
                        <p class="csv-hint">
                            <strong>Uwaga:</strong> Separator to ≈õrednik (;). Liczba odpowiedzi jest dowolna (ustaw powy≈ºej).<br>
                            Kolumna "poprawna" zawiera numer poprawnej odpowiedzi.
                            Dla wielokrotnego wyboru podaj numery oddzielone przecinkiem (np. 1,3).<br>
                            <strong>Notatki (opcjonalne):</strong> Mo≈ºesz dodaƒá notatki do pytania i ka≈ºdej odpowiedzi.<br>
                            <strong>Markdown:</strong> Notatki obs≈ÇugujƒÖ **pogrubienie**, *kursywa*, `kod`, listy itp.<br>
                            <strong>Matematyka:</strong> U≈ºyj <code>$wzor$</code> dla inline lub <code>\[wzor\]</code> dla bloku (LaTeX/KaTeX)
                        </p>
                        <button id="download-template" class="btn btn-secondary">
                            üì• Pobierz szablon CSV
                        </button>
                    </div>

                    <div class="import-tabs">
                        <button class="import-tab active" data-import="file">üìÅ Wczytaj plik</button>
                        <button class="import-tab" data-import="paste">üìã Wklej tekst</button>
                    </div>

                    <div id="import-file" class="import-content active">
                        <div class="file-upload">
                            <input type="file" id="csv-file" accept=".csv">
                            <label for="csv-file" class="file-label">
                                <span class="file-icon">üìÅ</span>
                                <span class="file-text">Wybierz plik CSV lub przeciƒÖgnij tutaj</span>
                            </label>
                            <div id="file-name" class="file-name"></div>
                        </div>
                    </div>

                    <div id="import-paste" class="import-content">
                        <div class="form-group">
                            <label for="csv-textarea">Wklej zawarto≈õƒá CSV:</label>
                            <textarea id="csv-textarea" rows="8" placeholder="pytanie;odpowiedz1;odpowiedz2;odpowiedz3;odpowiedz4;poprawna;notatka_pytania;notatka1;notatka2;notatka3;notatka4
Ile to 2+2?;2;3;4;5;3;Proste dodawanie;Zbyt ma≈Ço;Blisko!;Poprawna!;Za du≈ºo
Stolica Polski?;Krak√≥w;Warszawa;Gda≈Ñsk;Pozna≈Ñ;2;;Dawna stolica;Tak!;;"></textarea>
                        </div>
                        <button id="parse-csv-text" class="btn btn-primary">
                            üì• Importuj z tekstu
                        </button>
                    </div>
                </div>

                <div class="card">
                    <h2>PodglƒÖd pyta≈Ñ</h2>
                    <div id="questions-preview" class="questions-preview">
                        <p class="empty-state">Zaimportuj plik CSV, aby zobaczyƒá pytania</p>
                    </div>
                </div>

                <div class="actions">
                    <button id="save-test" class="btn btn-primary" disabled>
                        üíæ Zapisz test
                    </button>
                    <button id="clear-form" class="btn btn-secondary">
                        üóëÔ∏è Wyczy≈õƒá
                    </button>
                </div>
            </section>

            <!-- Sekcja: Testy -->
            <section id="tests" class="tab-content">
                <div class="section-header">
                    <h1>Twoje testy</h1>
                    <p>Wybierz test do rozwiƒÖzania</p>
                </div>

                <div id="tests-list" class="tests-list">
                    <p class="empty-state">Nie masz jeszcze ≈ºadnych test√≥w. Dodaj pierwszy test!</p>
                </div>
            </section>

            <!-- Sekcja: Wyniki -->
            <section id="results" class="tab-content">
                <div class="section-header">
                    <h1>Historia wynik√≥w</h1>
                    <p>PrzeglƒÖd Twoich wynik√≥w z test√≥w</p>
                </div>

                <div id="results-list" class="results-list">
                    <p class="empty-state">Brak wynik√≥w. RozwiƒÖ≈º test, aby zobaczyƒá wyniki!</p>
                </div>
            </section>

            <!-- Ekran rozwiƒÖzywania testu -->
            <section id="quiz-screen" class="tab-content quiz-screen">
                <div class="quiz-header">
                    <h2 id="quiz-title">Nazwa testu</h2>
                    <div class="quiz-progress">
                        <span id="quiz-progress-text">Pytanie 1 z 10</span>
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                    <button id="quit-quiz" class="btn btn-danger btn-small">‚úï Zako≈Ñcz</button>
                </div>

                <div class="quiz-content">
                    <div class="question-card">
                        <div class="question-header-row">
                            <div class="question-number" id="question-number">1</div>
                            <button class="edit-question-btn" onclick="openEditQuestionModal()" title="Edytuj pytanie">
                                ‚úèÔ∏è Edytuj
                            </button>
                        </div>
                        <h3 id="question-text" class="question-text">Tre≈õƒá pytania</h3>
                        <div class="question-notes">
                            <button class="note-toggle-btn" onclick="toggleQuestionNote()" title="Poka≈º/ukryj notatkƒô">
                                üìù Notatka
                            </button>
                            <button class="note-edit-btn" onclick="editQuestionNote()" title="Edytuj notatkƒô">
                                ‚úèÔ∏è
                            </button>
                        </div>
                        <div id="question-note" class="note-content hidden"></div>
                    </div>

                    <div id="answers-list" class="answers-list">
                        <!-- Odpowiedzi bƒôdƒÖ generowane dynamicznie -->
                    </div>
                </div>

                <div class="quiz-actions">
                    <button id="prev-question" class="btn btn-secondary" disabled>
                        ‚Üê Poprzednie
                    </button>
                    <button id="next-question" class="btn btn-primary">
                        Dalej ‚Üí
                    </button>
                </div>
            </section>

            <!-- Ekran wyniku testu -->
            <section id="result-screen" class="tab-content result-screen">
                <div class="result-card">
                    <div class="result-icon" id="result-icon">üéâ</div>
                    <h1 id="result-title">Gratulacje!</h1>
                    <div class="result-stats">
                        <div class="stat">
                            <span class="stat-value" id="result-score">8/10</span>
                            <span class="stat-label">Punkty</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="result-percentage">80%</span>
                            <span class="stat-label">Wynik</span>
                        </div>
                    </div>
                    <div class="result-message" id="result-message">
                        ≈öwietna robota! Tak trzymaj!
                    </div>
                    <div class="result-actions">
                        <button id="show-answers-review" class="btn btn-primary">üîç PodglƒÖd odpowiedzi</button>
                        <button id="retry-test" class="btn btn-secondary">üîÑ Spr√≥buj ponownie</button>
                        <button id="back-to-tests" class="btn btn-secondary">üìã Wr√≥ƒá do test√≥w</button>
                    </div>
                </div>
            </section>

            <!-- Ekran podglƒÖdu odpowiedzi -->
            <section id="review-screen" class="tab-content review-screen">
                <div class="review-header">
                    <h1 id="review-title">PodglƒÖd odpowiedzi</h1>
                    <div class="review-summary">
                        <span class="review-stat correct">‚úÖ Poprawne: <strong id="review-correct">0</strong></span>
                        <span class="review-stat incorrect">‚ùå B≈Çƒôdne: <strong id="review-incorrect">0</strong></span>
                    </div>
                    <div class="review-header-actions">
                        <button id="close-review" class="btn btn-secondary">‚Üê Wr√≥ƒá</button>
                    </div>
                </div>
                <div id="review-list" class="review-list">
                    <!-- Lista pyta≈Ñ i odpowiedzi -->
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
