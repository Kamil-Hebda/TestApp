<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikacja Testowa</title>
    <link rel="stylesheet" href="styles.css">
    <!-- KaTeX dla wyraÅ¼eÅ„ matematycznych -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
</head>
<body>
    <!-- Marked.js dla Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- KaTeX -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    
    <div class="app-container">
        <!-- GÃ³rny pasek nawigacji -->
        <nav class="navbar">
            <div class="nav-brand">ğŸ“ TestApp</div>
            <ul class="nav-tabs">
                <li class="nav-tab active" data-tab="add-test">
                    <span class="tab-icon">â•</span>
                    Dodaj test
                </li>
                <li class="nav-tab" data-tab="tests">
                    <span class="tab-icon">ğŸ“‹</span>
                    Testy
                </li>
                <li class="nav-tab" data-tab="results">
                    <span class="tab-icon">ğŸ“Š</span>
                    Wyniki
                </li>
            </ul>
        </nav>

        <!-- GÅ‚Ã³wna zawartoÅ›Ä‡ -->
        <main class="main-content">
            <!-- Sekcja: Dodaj test -->
            <section id="add-test" class="tab-content active">
                <div class="section-header">
                    <h1>Dodaj nowy test</h1>
                    <p>UtwÃ³rz test rÄ™cznie lub zaimportuj z pliku CSV</p>
                    <div class="storage-info">
                        ğŸ’¾ Twoje testy i wyniki sÄ… automatycznie zapisywane w przeglÄ…darce i nie zniknÄ… po zamkniÄ™ciu aplikacji.
                    </div>
                </div>

                <div class="card">
                    <h2>Informacje o teÅ›cie</h2>
                    <div class="form-group">
                        <label for="test-name">Nazwa testu</label>
                        <input type="text" id="test-name" placeholder="np. Test z matematyki">
                    </div>
                    <div class="form-group">
                        <label for="test-type">Typ testu</label>
                        <select id="test-type">
                            <option value="single">Jednokrotny wybÃ³r</option>
                            <option value="multiple">Wielokrotny wybÃ³r</option>
                        </select>
                    </div>
                </div>

                <div class="card">
                    <h2>Import z CSV</h2>
                    <div class="csv-info">
                        <h3>Wymagany format CSV:</h3>
                        <code class="csv-format">
                            pytanie;odpowiedz1;odpowiedz2;odpowiedz3;odpowiedz4;poprawna;notatka_pytania;notatka1;notatka2;notatka3;notatka4<br>
                            Ile to 2+2?;2;3;4;5;3;Proste dodawanie;Zbyt maÅ‚o;Blisko!;Poprawna odpowiedÅº!;Za duÅ¼o<br>
                            Stolica Polski?;KrakÃ³w;Warszawa;GdaÅ„sk;PoznaÅ„;2;;Dawna stolica;Tak!;Port morski;
                        </code>
                        <p class="csv-hint">
                            <strong>Uwaga:</strong> Separator to Å›rednik (;). 
                            Kolumna "poprawna" zawiera numer poprawnej odpowiedzi (1-4).
                            Dla wielokrotnego wyboru moÅ¼esz podaÄ‡ kilka numerÃ³w oddzielonych przecinkiem (np. 1,3).<br>
                            <strong>Notatki (opcjonalne):</strong> MoÅ¼esz dodaÄ‡ notatki do pytania i kaÅ¼dej odpowiedzi. Zostaw puste jeÅ›li nie chcesz notatki.<br>
                            <strong>Markdown:</strong> Notatki obsÅ‚ugujÄ… formatowanie Markdown (**pogrubienie**, *kursywa*, `kod`, listy itp.)<br>
                            <strong>Matematyka:</strong> UÅ¼yj <code>$wzor$</code> dla inline lub <code>\[wzor\]</code> dla bloku (LaTeX/KaTeX)
                        </p>
                        <button id="download-template" class="btn btn-secondary">
                            ğŸ“¥ Pobierz szablon CSV
                        </button>
                    </div>

                    <div class="import-tabs">
                        <button class="import-tab active" data-import="file">ğŸ“ Wczytaj plik</button>
                        <button class="import-tab" data-import="paste">ğŸ“‹ Wklej tekst</button>
                    </div>

                    <div id="import-file" class="import-content active">
                        <div class="file-upload">
                            <input type="file" id="csv-file" accept=".csv">
                            <label for="csv-file" class="file-label">
                                <span class="file-icon">ğŸ“</span>
                                <span class="file-text">Wybierz plik CSV lub przeciÄ…gnij tutaj</span>
                            </label>
                            <div id="file-name" class="file-name"></div>
                        </div>
                    </div>

                    <div id="import-paste" class="import-content">
                        <div class="form-group">
                            <label for="csv-textarea">Wklej zawartoÅ›Ä‡ CSV:</label>
                            <textarea id="csv-textarea" rows="8" placeholder="pytanie;odpowiedz1;odpowiedz2;odpowiedz3;odpowiedz4;poprawna;notatka_pytania;notatka1;notatka2;notatka3;notatka4
Ile to 2+2?;2;3;4;5;3;Proste dodawanie;Zbyt maÅ‚o;Blisko!;Poprawna!;Za duÅ¼o
Stolica Polski?;KrakÃ³w;Warszawa;GdaÅ„sk;PoznaÅ„;2;;Dawna stolica;Tak!;;"></textarea>
                        </div>
                        <button id="parse-csv-text" class="btn btn-primary">
                            ğŸ“¥ Importuj z tekstu
                        </button>
                    </div>
                </div>

                <div class="card">
                    <h2>PodglÄ…d pytaÅ„</h2>
                    <div id="questions-preview" class="questions-preview">
                        <p class="empty-state">Zaimportuj plik CSV, aby zobaczyÄ‡ pytania</p>
                    </div>
                </div>

                <div class="actions">
                    <button id="save-test" class="btn btn-primary" disabled>
                        ğŸ’¾ Zapisz test
                    </button>
                    <button id="clear-form" class="btn btn-secondary">
                        ğŸ—‘ï¸ WyczyÅ›Ä‡
                    </button>
                </div>
            </section>

            <!-- Sekcja: Testy -->
            <section id="tests" class="tab-content">
                <div class="section-header">
                    <h1>Twoje testy</h1>
                    <p>Wybierz test do rozwiÄ…zania</p>
                </div>

                <div id="tests-list" class="tests-list">
                    <p class="empty-state">Nie masz jeszcze Å¼adnych testÃ³w. Dodaj pierwszy test!</p>
                </div>
            </section>

            <!-- Sekcja: Wyniki -->
            <section id="results" class="tab-content">
                <div class="section-header">
                    <h1>Historia wynikÃ³w</h1>
                    <p>PrzeglÄ…d Twoich wynikÃ³w z testÃ³w</p>
                </div>

                <div id="results-list" class="results-list">
                    <p class="empty-state">Brak wynikÃ³w. RozwiÄ…Å¼ test, aby zobaczyÄ‡ wyniki!</p>
                </div>
            </section>

            <!-- Ekran rozwiÄ…zywania testu -->
            <section id="quiz-screen" class="tab-content quiz-screen">
                <div class="quiz-header">
                    <h2 id="quiz-title">Nazwa testu</h2>
                    <div class="quiz-progress">
                        <span id="quiz-progress-text">Pytanie 1 z 10</span>
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                    <button id="quit-quiz" class="btn btn-danger btn-small">âœ• ZakoÅ„cz</button>
                </div>

                <div class="quiz-content">
                    <div class="question-card">
                        <div class="question-header-row">
                            <div class="question-number" id="question-number">1</div>
                            <button class="edit-question-btn" onclick="openEditQuestionModal()" title="Edytuj pytanie">
                                âœï¸ Edytuj
                            </button>
                        </div>
                        <h3 id="question-text" class="question-text">TreÅ›Ä‡ pytania</h3>
                        <div class="question-notes">
                            <button class="note-toggle-btn" onclick="toggleQuestionNote()" title="PokaÅ¼/ukryj notatkÄ™">
                                ğŸ“ Notatka
                            </button>
                            <button class="note-edit-btn" onclick="editQuestionNote()" title="Edytuj notatkÄ™">
                                âœï¸
                            </button>
                        </div>
                        <div id="question-note" class="note-content hidden"></div>
                    </div>

                    <div id="answers-list" class="answers-list">
                        <!-- Odpowiedzi bÄ™dÄ… generowane dynamicznie -->
                    </div>
                </div>

                <div class="quiz-actions">
                    <button id="prev-question" class="btn btn-secondary" disabled>
                        â† Poprzednie
                    </button>
                    <button id="next-question" class="btn btn-primary">
                        Dalej â†’
                    </button>
                </div>
            </section>

            <!-- Ekran wyniku testu -->
            <section id="result-screen" class="tab-content result-screen">
                <div class="result-card">
                    <div class="result-icon" id="result-icon">ğŸ‰</div>
                    <h1 id="result-title">Gratulacje!</h1>
                    <div class="result-stats">
                        <div class="stat">
                            <span class="stat-value" id="result-score">8/10</span>
                            <span class="stat-label">Punkty</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="result-percentage">80%</span>
                            <span class="stat-label">Wynik</span>
                        </div>
                    </div>
                    <div class="result-message" id="result-message">
                        Åšwietna robota! Tak trzymaj!
                    </div>
                    <div class="result-actions">
                        <button id="show-answers-review" class="btn btn-primary">ğŸ” PodglÄ…d odpowiedzi</button>
                        <button id="retry-test" class="btn btn-secondary">ğŸ”„ SprÃ³buj ponownie</button>
                        <button id="back-to-tests" class="btn btn-secondary">ğŸ“‹ WrÃ³Ä‡ do testÃ³w</button>
                    </div>
                </div>
            </section>

            <!-- Ekran podglÄ…du odpowiedzi -->
            <section id="review-screen" class="tab-content review-screen">
                <div class="review-header">
                    <h1 id="review-title">PodglÄ…d odpowiedzi</h1>
                    <div class="review-summary">
                        <span class="review-stat correct">âœ… Poprawne: <strong id="review-correct">0</strong></span>
                        <span class="review-stat incorrect">âŒ BÅ‚Ä™dne: <strong id="review-incorrect">0</strong></span>
                    </div>
                    <div class="review-header-actions">
                        <button id="close-review" class="btn btn-secondary">â† WrÃ³Ä‡</button>
                    </div>
                </div>
                <div id="review-list" class="review-list">
                    <!-- Lista pytaÅ„ i odpowiedzi -->
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
